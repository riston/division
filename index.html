<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>division by codename-</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/overwrite.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>division</h1>
        <p>Simple and powerful wrapper over node.js cluster API</p>

        <p class="view"><a href="https://github.com/codename-/division">View the Project on GitHub <small>codename-/division</small></a></p>


        <ul>
          <li><a href="https://github.com/codename-/division/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/codename-/division/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/codename-/division">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="division" class="anchor" href="#division"><span class="octicon octicon-link"></span></a>division</h1>

<p>Simple and powerful wrapper over <a href="http://nodejs.org/">node.js</a> <a href="http://nodejs.org/api/cluster.html">cluster</a> API.<br>
This module is inspired by impressive but abandoned project <a href="https://github.com/LearnBoost/cluster">Cluster</a> created by <a href="https://github.com/visionmedia">visionmedia</a> (TJ Holowaychuk).</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<div class="highlight"><pre>npm install division
</pre></div>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<p>The most valuable feature: you don't need to change your code to working within cluster.</p>

<p>Other features:</p>

<ul>
<li> standalone (without 3rd-party dependencies)</li>
<li> zero-downtime restart</li>
<li> maintains worker count</li>
<li> forceful shutdown support</li>
<li> graceful shutdown support</li>
<li> bundled extensions

<ul>
<li> debug: enable verbose debugging informations</li>
<li> signals: add ability to control cluster with POSIX signals</li>
</ul>
</li>
</ul><h2>
<a name="example" class="anchor" href="#example"><span class="octicon octicon-link"></span></a>Example</h2>

<h3>
<a name="standard-configuration-example" class="anchor" href="#standard-configuration-example"><span class="octicon octicon-link"></span></a>Standard configuration example</h3>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">division</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'division'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">division</span><span class="p">();</span>

<span class="c1">// Configuration for development environment</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="s1">'development'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Put your development configuration here</span>
  <span class="nx">cluster</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'args'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'--some-process-args'</span><span class="p">,</span> <span class="s1">'send-to-workers'</span><span class="p">]);</span>
<span class="p">});</span>

<span class="c1">// Configuration for production environment</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="s1">'production'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Put your production configuration here</span>
  <span class="nx">cluster</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="s1">'silent'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Configuration for all environments</span>
<span class="c1">// TIP: this is pointing to cluster</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'path'</span><span class="p">,</span> <span class="s1">'app.js'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// You can also set settings without configuration block</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'size'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="c1">// Use extensions</span>
<span class="c1">// TIP: You can chain (almost) all methods</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'debug'</span><span class="p">).</span><span class="nx">use</span><span class="p">(</span><span class="s1">'signals'</span><span class="p">);</span>

<span class="c1">// Start your application as a cluster!</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="c1">// `this` is pointing to the Master instance</span>
<span class="p">});</span>
</pre></div>

<p>You can set environment while launching application - in this way:</p>

<pre><code>NODE_ENV=production node cluster.js
</code></pre>

<h3>
<a name="minimal-configuration-example" class="anchor" href="#minimal-configuration-example"><span class="octicon octicon-link"></span></a>Minimal configuration example</h3>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">division</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'division'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">division</span><span class="p">();</span>

<span class="c1">// You can chain methods</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'path'</span><span class="p">,</span> <span class="s1">'app.js'</span><span class="p">).</span><span class="nx">run</span><span class="p">();</span>
</pre></div>

<h2>
<a name="api-reference" class="anchor" href="#api-reference"><span class="octicon octicon-link"></span></a>API Reference</h2>

<h3>
<a name="division-class" class="anchor" href="#division-class"><span class="octicon octicon-link"></span></a>Division class</h3>

<h4>
<a name="attributes" class="anchor" href="#attributes"><span class="octicon octicon-link"></span></a>Attributes</h4>

<h6>
<a name="version" class="anchor" href="#version"><span class="octicon octicon-link"></span></a>version</h6>

<h6>
<a name="environment" class="anchor" href="#environment"><span class="octicon octicon-link"></span></a>environment</h6>

<h6>
<a name="settings" class="anchor" href="#settings"><span class="octicon octicon-link"></span></a>settings</h6>

<h4>
<a name="methods" class="anchor" href="#methods"><span class="octicon octicon-link"></span></a>Methods</h4>

<h6>
<a name="configure" class="anchor" href="#configure"><span class="octicon octicon-link"></span></a>configure</h6>

<h6>
<a name="set" class="anchor" href="#set"><span class="octicon octicon-link"></span></a>set</h6>

<h6>
<a name="get" class="anchor" href="#get"><span class="octicon octicon-link"></span></a>get</h6>

<h6>
<a name="use" class="anchor" href="#use"><span class="octicon octicon-link"></span></a>use</h6>

<h6>
<a name="enable" class="anchor" href="#enable"><span class="octicon octicon-link"></span></a>enable</h6>

<h6>
<a name="disable" class="anchor" href="#disable"><span class="octicon octicon-link"></span></a>disable</h6>

<h6>
<a name="enabled" class="anchor" href="#enabled"><span class="octicon octicon-link"></span></a>enabled</h6>

<h6>
<a name="disabled" class="anchor" href="#disabled"><span class="octicon octicon-link"></span></a>disabled</h6>

<h6>
<a name="run" class="anchor" href="#run"><span class="octicon octicon-link"></span></a>run</h6>

<h3>
<a name="master-class" class="anchor" href="#master-class"><span class="octicon octicon-link"></span></a>Master class</h3>

<p><code>Master</code> is returned when you call <code>run</code> method from <code>Division</code> and it is also set as a scope for callback function of this method.</p>

<h4>
<a name="attributes-1" class="anchor" href="#attributes-1"><span class="octicon octicon-link"></span></a>Attributes</h4>

<p><code>Master</code> provide these public attributes</p>

<h6>
<a name="pid" class="anchor" href="#pid"><span class="octicon octicon-link"></span></a>pid</h6>

<h6>
<a name="startup" class="anchor" href="#startup"><span class="octicon octicon-link"></span></a>startup</h6>

<h4>
<a name="methods-1" class="anchor" href="#methods-1"><span class="octicon octicon-link"></span></a>Methods</h4>

<p><code>Master</code> provide these public methods</p>

<h6>
<a name="addsignallistener" class="anchor" href="#addsignallistener"><span class="octicon octicon-link"></span></a>addSignalListener</h6>

<h6>
<a name="increase" class="anchor" href="#increase"><span class="octicon octicon-link"></span></a>increase</h6>

<h6>
<a name="decrease" class="anchor" href="#decrease"><span class="octicon octicon-link"></span></a>decrease</h6>

<h6>
<a name="restart" class="anchor" href="#restart"><span class="octicon octicon-link"></span></a>restart</h6>

<h6>
<a name="close" class="anchor" href="#close"><span class="octicon octicon-link"></span></a>close</h6>

<h6>
<a name="destroy" class="anchor" href="#destroy"><span class="octicon octicon-link"></span></a>destroy</h6>

<h6>
<a name="kill" class="anchor" href="#kill"><span class="octicon octicon-link"></span></a>kill</h6>

<h6>
<a name="maintenance" class="anchor" href="#maintenance"><span class="octicon octicon-link"></span></a>maintenance</h6>

<h6>
<a name="publish" class="anchor" href="#publish"><span class="octicon octicon-link"></span></a>publish</h6>

<h6>
<a name="broadcast" class="anchor" href="#broadcast"><span class="octicon octicon-link"></span></a>broadcast</h6>

<h4>
<a name="events" class="anchor" href="#events"><span class="octicon octicon-link"></span></a>Events</h4>

<p><code>Master</code> inherit his prototype from <code>EventEmitter</code> and emit these events</p>

<h6>
<a name="error" class="anchor" href="#error"><span class="octicon octicon-link"></span></a>error</h6>

<h6>
<a name="increase-1" class="anchor" href="#increase-1"><span class="octicon octicon-link"></span></a>increase</h6>

<h6>
<a name="decrease-1" class="anchor" href="#decrease-1"><span class="octicon octicon-link"></span></a>decrease</h6>

<h6>
<a name="restart-1" class="anchor" href="#restart-1"><span class="octicon octicon-link"></span></a>restart</h6>

<h6>
<a name="close-1" class="anchor" href="#close-1"><span class="octicon octicon-link"></span></a>close</h6>

<h6>
<a name="destroy-1" class="anchor" href="#destroy-1"><span class="octicon octicon-link"></span></a>destroy</h6>

<h6>
<a name="fork" class="anchor" href="#fork"><span class="octicon octicon-link"></span></a>fork</h6>

<h6>
<a name="online" class="anchor" href="#online"><span class="octicon octicon-link"></span></a>online</h6>

<h6>
<a name="listening" class="anchor" href="#listening"><span class="octicon octicon-link"></span></a>listening</h6>

<h6>
<a name="disconnect" class="anchor" href="#disconnect"><span class="octicon octicon-link"></span></a>disconnect</h6>

<h6>
<a name="exit" class="anchor" href="#exit"><span class="octicon octicon-link"></span></a>exit</h6>

<h3>
<a name="worker-class" class="anchor" href="#worker-class"><span class="octicon octicon-link"></span></a>Worker class</h3>

<p><code>Worker</code> is returned in some of <code>Master</code> events</p>

<h4>
<a name="attributes-2" class="anchor" href="#attributes-2"><span class="octicon octicon-link"></span></a>Attributes</h4>

<p><code>Worker</code> provide these public attributes</p>

<h6>
<a name="id" class="anchor" href="#id"><span class="octicon octicon-link"></span></a>id</h6>

<h6>
<a name="pid-1" class="anchor" href="#pid-1"><span class="octicon octicon-link"></span></a>pid</h6>

<h6>
<a name="startup-1" class="anchor" href="#startup-1"><span class="octicon octicon-link"></span></a>startup</h6>

<h6>
<a name="status" class="anchor" href="#status"><span class="octicon octicon-link"></span></a>status</h6>

<h4>
<a name="methods-2" class="anchor" href="#methods-2"><span class="octicon octicon-link"></span></a>Methods</h4>

<p><code>Worker</code> provide these public methods</p>

<h6>
<a name="close-2" class="anchor" href="#close-2"><span class="octicon octicon-link"></span></a>close</h6>

<h6>
<a name="kill-1" class="anchor" href="#kill-1"><span class="octicon octicon-link"></span></a>kill</h6>

<h6>
<a name="publish-1" class="anchor" href="#publish-1"><span class="octicon octicon-link"></span></a>publish</h6>

<h4>
<a name="events-1" class="anchor" href="#events-1"><span class="octicon octicon-link"></span></a>Events</h4>

<p><code>Worker</code> inherit his prototype from <code>EventEmitter</code> and emit these events</p>

<h6>
<a name="close-3" class="anchor" href="#close-3"><span class="octicon octicon-link"></span></a>close</h6>

<h6>
<a name="kill-2" class="anchor" href="#kill-2"><span class="octicon octicon-link"></span></a>kill</h6>

<h6>
<a name="publish-2" class="anchor" href="#publish-2"><span class="octicon octicon-link"></span></a>publish</h6>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/codename-">codename-</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>

  </body>
</html>
